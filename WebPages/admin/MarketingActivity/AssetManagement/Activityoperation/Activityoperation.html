<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>运营账号充值管理</title>
    <link rel="stylesheet" href="css/Activityoperation.css"/>
</head>
<body>
<div class="wrap" style="background: #f2f2f2">
    <div class="w_wrap" style="background: #ffffff">
        <div class="b_wrap" style="background: #e3e3e3">
            <div class="distributor">
                <div class="distributor_t">
                    <div class="dis_L">
                        <p class="dis_L_title">运营账户余额状况</p>
                        <div class="dis_side">
                            分<br/>销<br/>商<br/>公<br/>众<br/>号
                        </div>
                        <div class="dis_min">
                            <div class="dis_min_T">
                                <ul class="dis_min_T1">
                                    <li>账户余额</li>
                                    <li>会员待提现</li>
                                </ul>
                                <ul class="dis_min_T2">
                                    <li>2222222 元</li>
                                    <li>2222234 元</li>
                                </ul>
                            </div>
                            <div class="dis_min_B formula">
                                <li>可用余额</li>
                                <li>23456 <i>元</i></li>
                                <span>公式</span>
                                <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                            </div>
                        </div>
                    </div>
                    <div class="xian"></div>
                    <div class="dis_r">
                        <ul class="dis_R_title">
                            <li>预测时间段</li>
                            <li class="three">近3天</li>
                            <li class="seven">近7天</li>
                            <li class="thrty">近30天</li>
                            <li class="zdy">自定义</li>
                            <span class="tians">近<input type="text" value="">天</span>
                            <button>重 置</button>
                        </ul>
                        <div class="dis_r_T">
                            <div class="dis_R_t">
                                <ul class="dis_r_T1">
                                    <li>预算事由</li>
                                    <li>总审批预算</li>
                                    <li>总发放</li>
                                </ul>
                                <ul class="dis_r_T2">
                                    <li>5 笔</li>
                                    <li>22222 元</li>
                                    <li>33333 元</li>
                                </ul>
                            </div>
                            <div class="dis_R_b formula">
                                <li class="dis_R_b1">
                                    预计所需资金
                                </li>
                                <li class="dis_R_b2">44444 元</li>
                                <span>公式</span>
                                <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="distributor_b">
                    <p style="margin-left: 17.6%;">缺口</p>
                    <p style="color: #fe1b1b;margin-left: 7.8%">22222元</p>
                    <button class="withdraw site-demo-layer" data-type="withdraw" style="background: #27b56b;margin-left: 50px">提现</button>
                    <button class="recharge site-demo-layer" data-type="recharge" style="background: #ff6032;margin-left: 30px">充值</button>
                    <button class="jymx" style="background: #4c83db;margin-left: 30px">交易明细</button>
                </div>

            </div>
            <div class="sell">
                <div class="distributor_t">
                    <div class="dis_L">
                        <div class="dis_side" style="background: #009f96">
                            超<br/>惠<br/>卖<br/>公<br/>众<br/>号
                        </div>
                        <div class="dis_min">
                            <div class="dis_min_T">
                                <ul class="dis_min_T1">
                                    <li>账户余额</li>
                                    <li>会员待提现</li>
                                </ul>
                                <ul class="dis_min_T2">
                                    <li>2222222 元</li>
                                    <li>2222234 元</li>
                                </ul>
                            </div>
                            <div class="dis_min_B formula">
                                <li>可用余额</li>
                                <li>23456 <i>元</i></li>
                                <span>公式</span>
                                <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                            </div>
                        </div>
                    </div>
                    <div class="xian"></div>
                    <div class="dis_r">
                        <div class="dis_r_T">
                            <div class="dis_R_t">
                                <ul class="dis_r_T1">
                                    <li>预算事由</li>
                                    <li>总审批预算</li>
                                    <li>总发放</li>
                                </ul>
                                <ul class="dis_r_T2">
                                    <li>5 笔</li>
                                    <li>22222 元</li>
                                    <li>33333 元</li>
                                </ul>
                            </div>
                            <div class="dis_R_b">
                                <li class="formula dis_R_b1">
                                    预计所需资金
                                    <span>公式</span>
                                    <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                                </li>
                                <li class="dis_R_b2">44444 元</li>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="distributor_b">
                    <p style="margin-left: 17.6%;">缺口</p>
                    <p style="color: #fe1b1b;margin-left: 7.8%">22222元</p>
                    <button class="withdraw site-demo-layer" data-type="withdraw" style="background: #27b56b;margin-left: 50px">提现</button>
                    <button class="recharge site-demo-layer" data-type="recharge" style="background: #ff6032;margin-left: 30px">充值</button>
                    <button class="jymx" style="background: #4c83db;margin-left: 30px">交易明细</button>
                </div>
            </div>
            <div class="buy">
                <div class="distributor_t">
                    <div class="dis_L">
                        <div class="dis_side" style="background: #ff6600">
                            超<br/>惠<br/>买<br/>公<br/>众<br/>号
                        </div>
                        <div class="dis_min">
                            <div class="dis_min_T">
                                <ul class="dis_min_T1">
                                    <li>账户余额</li>
                                    <li>会员待提现</li>
                                </ul>
                                <ul class="dis_min_T2">
                                    <li>2222222 元</li>
                                    <li>2222234 元</li>
                                </ul>
                            </div>
                            <div class="dis_min_B formula">
                                <li>可用余额</li>
                                <li>23456 <i>元</i></li>
                                <span>公式</span>
                                <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                            </div>
                        </div>
                    </div>
                    <div class="xian"></div>
                    <div class="dis_r">
                        <div class="dis_r_T">
                            <div class="dis_R_t">
                                <ul class="dis_r_T1">
                                    <li>预算事由</li>
                                    <li>总审批预算</li>
                                    <li>总发放</li>
                                </ul>
                                <ul class="dis_r_T2">
                                    <li>5 笔</li>
                                    <li>22222 元</li>
                                    <li>33333 元</li>
                                </ul>
                            </div>
                            <div class="dis_R_b">
                                <li class="formula dis_R_b1">
                                    预计所需资金
                                    <span>公式</span>
                                    <p>可用余额：11*1*1*1*1*1*1*1**1</p>
                                </li>
                                <li class="dis_R_b2">44444 元</li>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="distributor_b">
                    <p style="margin-left: 17.6%;">缺口</p>
                    <p style="color: #fe1b1b;margin-left: 7.8%">22222元</p>
                    <button class="withdraw site-demo-layer" data-type="withdraw" style="background: #27b56b;margin-left: 50px">提现</button>
                    <button class="recharge site-demo-layer" data-type="recharge" style="background: #ff6032;margin-left: 30px">充值</button>
                    <button class="jymx" style="background: #4c83db;margin-left: 30px">交易明细</button>
                </div>
            </div>
        </div>
    </div>
</div>

    <script src="../../../lib/jquery/1.9.1/jquery.min.js"></script>
    <script src="../Memberwallet/layui-v1.0.7/layui/layui.js"></script>


    <script>
        $(function(){

           /* 交互部分*/
            /*计算前几天函数封装--beforetime*/
            function getBeforeDate(n){
                var n = n;
                var d = new Date();
                var year = d.getFullYear();
                var mon=d.getMonth()+1;
                var day=d.getDate();
                if(day <= n){
                    if(mon>1) {
                        mon=mon-1;
                    }
                    else {
                        year = year-1;
                        mon = 12;
                    }
                }
                d.setDate(d.getDate()-n);
                year = d.getFullYear();
                mon=d.getMonth()+1;
                day=d.getDate();
                s = year+"-"+(mon<10?('0'+mon):mon)+"-"+(day<10?('0'+day):day);
                return s;
            }
            /*获取当前时间封装函数*/
            /*格式xxxx-xx-xx*/
            function myDate(){
                var d = new Date();
                var year = d.getFullYear();
                var month = d.getMonth() + 1; // 当前月是要+1
                month = month < 10 ? ("0" + month) : month;
                var dt = d.getDate();
                dt = dt < 10 ? ("0" + dt) : dt;
//                var today = year + "-" + month + "-" + dt;
//                alert(today);
                return today = year + "-" + month + "-" + dt;
            }

            /*ajax交互封装*/
            function timeAjax (){
//                var myDate=new Date();
                myDate();
                var times={
                    bengintime:s,
                    endtime:today
                }
                console.log(s)
                console.log(today)

                $.ajax({
               url:"http://127.0.0.1:40010/webapi/asset/ipaloma/forecast",
//                    url:"http://127.0.0.1:40010/webapi/asset/member/dict/member_class",
                    url:"javascript/summary.json",
                    dataType:"json",
                    data:times,
                    success:function(data){
                        console.log(data.content.account_1.asset_balance)
                        var str1="";
                        var str2="";
                        var str3="";
//                        str1+="<li>"+ this.content[0].account_1.asset_balance +"</li>"


                    }
                })
            }

            /*预测时间段点击事件*/
            $(".three").click(function(){
                getBeforeDate(2);
                timeAjax();
            })
            $(".seven").click(function(){
                getBeforeDate(6);
                timeAjax();
            })
            $(".thrty").click(function(){
                getBeforeDate(29);
                timeAjax();
            })



            /*预测时间段*/
            $(".dis_R_title li:not(li:first-child)").on("click",function(e){
                $(this).css({border:"1px solid #4778c7",color:"#4778c7"}).siblings("li").css({border:"1px solid #e3e3e3",color:"#000"})
                var target= e.target;
                if($(target).hasClass("zdy")){
                    $(".tians").css({
                        visibility:"visible",
                        border:"1px solid #4778c7",
                        "border-left":"none"
                    })
                }else {
                    $(".tians").css({
                        visibility: "hidden",
                        border: "1px solid #e3e3e3",
                        "border-left":"none",
                        "color":"#000"
                    })
//                    $(".tians input").val("");
                    $(this).parents(".dis_R_title").find(".tians").html("");
                    $(this).parents(".dis_R_title").find(".tians").html('近' + '<input type="text" value="">' +'天')
                    keyDown();
                }
            })

//            $(".tians input").blur(function(){
//                var reg = new RegExp("^[0-9]*$");
//                if(!reg.test($(".tians input").val())){
//                    alert("请输入数字!");
//                    $(this).val("");
//                }
//            })

           /* 预测时间段--回车按键*/
            keyDown();
            function keyDown(){
                $(".tians input").keydown(function(e){
                    if(e.keyCode==13){
//                    e.preventDefault();
                        var reg = new RegExp("^[0-9]*$");
                        if(!reg.test($(".tians input").val())){
                            alert("请输入数字!");
                            $(this).val("");
                            return false;
                        }else{
//                            alert(0)
                            $(this).parents(".tians").css("color","#4778c7")
                            $(this).parents(".tians").html("近" + $(this).val() + "天");
                            //自定义时间的ajax搜索
                            var self=$(this).val()-1;
//                            console.log(self);
                            getBeforeDate(self);
                            timeAjax();
                        }
                    }
                });
            }

            $(".dis_R_title button").click(function(){
                $(this).parent(".dis_R_title").find("li:not(li:first-child)").css({border:"1px solid #fff",color:"#000"});
                $(this).parent(".dis_R_title").find("span").css({
                    border:"1px solid #fff",
                    visibility: 'hidden'
                });

                $(this).parents(".dis_R_title").find(".tians").css("color","#000000")
                $(this).parents(".dis_R_title").find(".tians").html("");
                $(this).parents(".dis_R_title").find(".tians").html('近' + '<input type="text" value="">' +'天')

//                $(this).parent(".dis_R_title").find(".tian input").val("");
                keyDown();
            })


            /*交易明细跳转*/
            $(".jymx").click(function(){
                window.location.href="html/distributor.html";
            })


          /*  /!*****layui******!/*/

            layui.use('layer', function(){ //独立版的layer无需执行这一句
                var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句
                //触发事件
                var active = {
                    recharge: function(){
                        var that = this;
                        //多窗口模式，层叠置顶
                        layer.open({
                            type: 2 //iframe
//                          , title: 'recharge'
                            , area: ['1150px', '560px']
                            , shade: 0.8
                            ,title: false
                            ,scrollbar: false
                            , content: 'html/recharge.html'
                        })
                    },
                    withdraw: function(){
                        var that = this;
                        //多窗口模式，层叠置顶
                        layer.open({
                            type: 2 //iframe
//                          , title: 'recharge'
                            , area: ['1150px', '560px']
                            , shade: 0.8
                            ,title: false
                            ,scrollbar: false
                            , content: 'html/withdraw.html'
                        })
                    },
                };
                $('.site-demo-layer').on('click', function(){
                    var type = $(this).data('type');
                    active[type] ? active[type].call(this) : '';
                });
            });

            $(".formula span").hover(function(i){
                $(this).parents(".formula").find("p").fadeIn();
            },function(i){
                $(this).parent(".formula").find("p").hide();
            })





        })



    </script>


</body>
</html>