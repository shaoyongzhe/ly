<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no" />
    <title>超惠活动</title>

    <link rel="stylesheet" href="/retailer/css/cui.css" />
    <link rel="stylesheet" href="/retailer/css/lib.css" />
    <link rel="stylesheet" href="/retailer/css/slick.css" />
    <link rel="stylesheet" href="/retailer/css/style.css" />
    <link rel="stylesheet" href="/retailer/css/retailerstyle.css" />
    <link rel="stylesheet" href="/retailer/css/weixintips.css" />

    <script src="/js/guid-debug.js"></script>
    <script src="/js/jquery/1.11.3/jquery.js"></script>
    <script src="/retailer/js/common-buttom-nav-debug.js"></script>
    <script src="/js/jquery/toastr.min.js"></script>
    <script src="/retailer/js/lib/jquery-toastr-extend.js"></script>
    <script type="text/javascript">document.writeln("<script type=\"text\/javascript\""); document.writeln("src=\"\/webapi\/retailer\/weixin\/jssdk?t=" + new Date().getTime() + "\">"); document.writeln("<\/script>");	</script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
    <script type="text/javascript" src="/js/wx/weixinconfiginit-debug.js"></script>
    <script type="text/javascript">var share_category = "retailer";</script>
    <script src="/js/wx/weixinshare-debug.js"></script>

    <style>
        .txtNew {
            overflow: hidden;
            padding-left: 8px;
            position: relative;
            min-height: 100px;
            margin-top: 6px;
        }

        .userNew {
            background: url(../image/user-ico.png) left center no-repeat;
            padding-left: 20px;
            color: #5C5C5C;
            background-size: 17px auto;
            /* height: 18px; */
            font-size: 14px;
            /* margin-top: 8%; */
            /* padding: 0px 0px 0px 23px; */
            /* position: inherit; */
            /* bottom: -5px; */
        }

        .timeNew {
            /* position: absolute; */
            /* bottom: 13px; */
            /* left: 9px; */
            font-size: 13px;
            background: url(../image/ico-time.jpg) left center no-repeat;
            /* margin-top: 15px; */
            background-size: 14px auto;
            padding-left: 20px;
            color: #666;
        }

        .h3Style {
            width: 100%;
            height: 45px;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            font-size: 16px;
        }

        .pin-spinner {
            display: none;
            width: 34px;
            height: 34px;
            position: fixed;
            margin-left: -17px;
            z-index: 999999999;
            left: 50%;
            top: 35%;
        }

        .pin-spinner-container1 > div, .pin-spinner-container2 > div, .pin-spinner-container3 > div {
            width: 10px;
            height: 10px;
            background-color: #457486;
            border-radius: 100%;
            position: absolute;
            -webkit-animation: bouncedelay 1.2s infinite ease-in-out;
            animation: bouncedelay 1.2s infinite ease-in-out;
            -webkit-animation-fill-mode: both;
            animation-fill-mode: both;
        }

        .pin-spinner .pin-spinner-container {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .pin-spinner-container2 {
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        .pin-spinner-container3 {
            -webkit-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
            transform: rotate(90deg);
        }

        .pin-spinner-circle1 {
            top: 0;
            left: 0;
        }

        .pin-spinner-circle2 {
            top: 0;
            right: 0;
        }

        .pin-spinner-circle3 {
            right: 0;
            bottom: 0;
        }

        .pin-spinner-circle4 {
            left: 0;
            bottom: 0;
        }

        .pin-spinner-container2 .pin-spinner-circle1 {
            -webkit-animation-delay: -1.1s;
            animation-delay: -1.1s;
        }

        .pin-spinner-container3 .pin-spinner-circle1 {
            -webkit-animation-delay: -1s;
            animation-delay: -1s;
        }

        .pin-spinner-container1 .pin-spinner-circle2 {
            -webkit-animation-delay: -.9s;
            animation-delay: -.9s;
        }

        .pin-spinner-container2 .pin-spinner-circle2 {
            -webkit-animation-delay: -.8s;
            animation-delay: -.8s;
        }

        .pin-spinner-container3 .pin-spinner-circle2 {
            -webkit-animation-delay: -.7s;
            animation-delay: -.7s;
        }

        .pin-spinner-container1 .pin-spinner-circle3 {
            -webkit-animation-delay: -.6s;
            animation-delay: -.6s;
        }

        .pin-spinner-container2 .pin-spinner-circle3 {
            -webkit-animation-delay: -.5s;
            animation-delay: -.5s;
        }

        .pin-spinner-container3 .pin-spinner-circle3 {
            -webkit-animation-delay: -.4s;
            animation-delay: -.4s;
        }

        .pin-spinner-container1 .pin-spinner-circle4 {
            -webkit-animation-delay: -.3s;
            animation-delay: -.3s;
        }

        .pin-spinner-container2 .pin-spinner-circle4 {
            -webkit-animation-delay: -.2s;
            animation-delay: -.2s;
        }

        .pin-spinner-container3 .pin-spinner-circle4 {
            -webkit-animation-delay: -.1s;
            animation-delay: -.1s;
        }

        @-webkit-keyframes bouncedelay {
            0%,80%,to {
                -webkit-transform: scale(0);
                transform: scale(0);
            }

            40% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }

        @keyframes bouncedelay {
            0%,80%,to {
                -webkit-transform: scale(0);
                transform: scale(0);
            }

            40% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="bgf6">
    <div class="pin-spinner" style="display:block;">
        <div class="pin-spinner-container pin-spinner-container1">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
        <div class="pin-spinner-container pin-spinner-container2">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
        <div class="pin-spinner-container pin-spinner-container3">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
    </div>
    <div class="pin-spinner" style="display:block;">
        <div class="pin-spinner-container pin-spinner-container1">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
        <div class="pin-spinner-container pin-spinner-container2">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
        <div class="pin-spinner-container pin-spinner-container3">
            <div class="pin-spinner-circle1"></div>
            <div class="pin-spinner-circle2"></div>
            <div class="pin-spinner-circle3"></div>
            <div class="pin-spinner-circle4"></div>
        </div>
    </div>

    <style>
        .sharestyle {
            position: fixed;
            left: 0;
            bottom: 50px;
            z-index: 99;
            width: 100%;
            height: 34px;
            line-height: 34px;
            color: #fff;
            text-align: center;
            background: rgba(0,0,0,0.6);
        }
    </style>
    <div id="bd" style="margin-bottom: 82px !important;">
        <div class="pic-list">
            <ul id="list"></ul>
        </div>
        <div class="sharestyle ">
            <a href="javascript:void(0);" style="color:#fff">
                推荐给好友
                <img style="width: 20px;vertical-align: middle;" src="../image/icon04.png" />
            </a>
        </div>
    </div>

    <footer>
        <div id="bottom-nav"></div>
    </footer>
    <script type="text/javascript">

        $(function () {
            $('.sharestyle').click(function (event) {
                $('.overlay').fadeIn(200);
            });
            $('.overlay').click(function (event) {
                /* Act on the event */
                $(this).fadeOut(200);
            });

            var tem =
                "<a href='supermaket_detail.html?activityid=activity_id'>	" +
                "  <li style='margin-bottom:5px !important'>	" +
                "    <div class='con'>	" +
                "      <div class='pic'>	" +
                "        <img style='height:80%' src='posterpic' alt='' />	" +
                "        <span>time_to_end_text</span></div>	" +
                "      <div class='txtNew' style='text-align:left;vertical-align:bottom;'>	" +
                "       <div style='overflow:hidden;max-height: 45px;width: 100%;'>   " +
                "         <h3 class='h3Style'>activitytitle</h3>	" +
                "       </div>  " +
                "       <div style='line-height: 2em;position: relative;bottom: -6px;'>  " +
                "           <div class='userNew'>fansinhistorycount</div>	" +
                "           <div class='timeNew'>begintimeandendtime</div></div>	" +
                "       </div>  " +
                "    </div>	" +
                "    <div class='li-down'>	" +
                "      <span>商</span>	" +
                "      <p style='overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:90%;'>distributorname</p></div>	" +
                "  </li>	" +
                "</a>	";

            //var tem = ("<a href=\"supermaket_detail.html?activityid=activity_id\"><li><div class=\"con\"><div class=\"pic\"><img style='height:80%' src=\"posterpic\" alt=\"\" \/><span>time_to_end_text<\/span><\/div><div class=\"txt\"><h3 style=\"overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;\">activitytitle<\/h3><div class=\"user\">fansinhistorycount<\/div><div class=\"time\">begintimeandendtime<\/div><\/div><\/div> <div class=\"li-down\"> <span>商<\/span> <p style=\"overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:90%;\"> distributorname<\/p><\/div> <\/li><\/a>");
            var listitem = ""
            var ajaxdata = {};

            if (wxjsconfig.sharekey != null)
                ajaxdata[wxjsconfig.sharekey] = "_";
            $.ajax({
                type: 'GET',
                dataType: 'json',
                data: ajaxdata,
                url: '/webapi/retailer/weixin/GetRetailerActivity',
                beforeSend: function () { $(".pin-spinner").show(); },
                complete: function () { $(".pin-spinner").hide(); },
                success: function (json) {
                    $(".pin-spinner").hide();
                    json = json || {};   /* 统一加这句话 */
                    if (json.error) {

                        toasterextend.showtips(json.error, "error");

                        return;
                    }
                    if (json.user_notification != undefined) {
                        $('#list').html("<div class=\"nohd\"><img style='height:80%' src=\"/retailer/image/超惠活动.png\" /><br/></div>");
                        toasterextend.showtips(json.user_notification, "info");
                        return;
                    }
                    $.each(json.data, function (i, value) {

                        listitem += tem;

                        if (typeof (value.activity_id) !== 'undefined')
                            listitem = listitem.replace("activity_id", value.activity_id);

                        if (typeof (value.activitytitle) !== 'undefined')
                            listitem = listitem.replace("activitytitle", value.activitytitle);

                        if (typeof (value.distributorname) !== 'undefined')
                            listitem = listitem.replace("distributorname", value.distributorname);

                        if (value.begintime !== 'undefined' && value.begintime !== "" && value.endtime !== 'undefined' && value.endtime !== "")
                            listitem = listitem.replace("begintimeandendtime", value.begintime + "至" + value.endtime);

                        if (typeof (value.posterpic) !== 'undefined')
                            listitem = listitem.replace("posterpic", value.posterpic);

                        if (typeof (value.fansinhistorycount) !== 'undefined')
                            listitem = listitem.replace("fansinhistorycount", value.fansinhistorycount);

                        if (typeof (value.time_to_end_text) !== 'undefined')
                            listitem = listitem.replace("time_to_end_text", value.time_to_end_text);

                    });
                    $('#list').html(listitem);
                    if ($.isFunction(wxjsshare)) {
                        wxjsshare(json.share || {});
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {

                    var errormsg = "访问异常";

                    if (XMLHttpRequest.status != null && XMLHttpRequest.status != 200) {
                        var json = JSON.parse(XMLHttpRequest.responseText);
                        errormsg = JSON.parse(json.Message).error;
                        if (errormsg == undefined || errormsg == '')
                            errormsg = "Http error: " + XMLHttpRequest.statusText;
                    }

                    toasterextend.showtips(errormsg, "error");
                }
            });
        });
    </script>
    <div class="overlay"></div>
</body>
</html>